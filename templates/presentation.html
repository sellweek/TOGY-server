<script type="text/javascript">
	presentationKey = {{.P.Key}}
</script>
<div id="title-container">
	<h1 id="title">{{.P.Name}}</h1>
</div>
<table>
	<tr>
		<td>
			<b>Typ súboru:</b>
		</td>
		<td>
			{{.P.FileType}}
		</td>
	</tr>
	<tr>
		<td>
			<b>Dátum pridania:</b>
		</td>
		<td>
			{{.P.Created}}
		</td>
	</tr>
	<tr>
		<td>
			<b>Priemerný čas sťahovania</b>
		</td>
		<td>
			{{.Avg}} sekúnd
		</td>
	</tr>
</table>

<h2>Popis</h2>
<div id="description-container">
	<div id="description">
		{{if .Desc}}
			{{.Desc}}
		{{else}}
			<p>
				Pre toto vysielanie zatiaľ nie je popis
			</p>
		{{end}}
	</div>
</div>

<h2>Akcie</h2>
<div id="buttons">
	{{if .P.Active}}
	Táto prezentácia je práve aktívna
	{{else}}
		<form method="POST" action="/admin/presentation/activate">
			<input type="hidden" name="id" value="{{.P.Key}}">
			<input type="submit" value="Aktivovať">
		</form>
	
		<form method="POST" action="/admin/presentation/delete">
			<input type="hidden" name="id" value="{{.P.Key}}">
			<input type="submit" value="Vymazať">
		</form>
	{{end}}
	<div id="download">
		<b>Odkaz na stiahnutie:</b><input type="text" value="http://togpm5.appspot.com/api/presentation/{{.P.Key}}/download"><br>
		<a href="/api/presentation/{{.P.Key}}/download">Stiahnuť prezentáciu</a>
	</div>
</div>

{{$zt := .ZeroTime}}

<h2>Informácie klientov</h2>
<table border="1">
	<tr>
		<th>
			Klient
		</th>
		<th>
			Informácia o aktualizácií
		</th>
		<th>
			Začiatok sťahovania
		</th>
		<th>
			Koniec sťahovania
		</th>
	</tr>
	{{range $k, $v  := .A}}
	{{if $k}}
		<tr>
			<td>
				{{$k}}
			</td>
			{{range $v}}
				<td>
					{{if .Equal $zt}}
						Ešte nevykonané
					{{else}}
						{{.Format "15:04:05, 2.1.2006"}}
					{{end}}
				</td>
			{{end}}
		</tr>
	{{end}}
	{{end}}
</table>

<p id="help" class="quiet">Názov a popis prezentácie môžete editovať po dvojitom kliknutí na ne.</p>

<script type="text/template" id="title-show-template">
	<h1 id="title"> <%= title %> </h1>
</script>

<script type="text/template" id="title-edit-template">
	<form>
		<input type="text" value="<%=title%>" class="title" id="title-field">
		<input type="submit">
	</form>
</script>

<script type="text/template" id="description-show-template">
<div id="description">
<%= text %>
</div>
</script>

<script type="text/template" id="description-edit-template">
<form>
<textarea id="description-field">
<%=markdown %>
</textarea><br>
<div class="small quiet">Markdown je povolený</div>
<input type="submit">
</form>
</script>

<script type="text/template" id="loading-template">
<img src="/static/images/spinner.gif" alt="loading" width="30" height="30">
</script>
